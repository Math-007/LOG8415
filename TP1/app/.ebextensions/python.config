container_commands:
  01_export_instance_id:
    command: "export INSTANCE_ID=$(ec2-metadata -i | awk '{split($0,a,": "); print a[2]}')"
option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: app:app
    NumProcesses: 1
    NumThreads: 1
  aws:elasticbeanstalk:application:environment:
    CLUSTER_ID: 1
  aws:autoscaling:asg:
    Availability Zones: Any
    Cooldown: '720'
    MaxSize: '5'
    MinSize: '5'
    EnableCapacityRebalancing: true
  aws:autoscaling:launchconfiguration:
    InstanceType: m4.large
  aws:elasticbeanstalk:command:
    DeploymentPolicy: AllAtOnce